# 原理介绍 {#concept_zbn_tzw_ydb .concept}

云服务器 ECS 提供快照功能，通过有计划地对云盘和共享块存储（以下简称磁盘）创建快照，能够保留磁盘在某一个或者多个时间点的数据状态。快照有力地保证了您的业务安全和提高了应用部署效率。

## 增量快照原理 {#section_yvf_5zw_ydb .section}

快照使用增量的方式，只拷贝两份快照之间有数据变化的部分。例如，下图快照 1、快照 2和快照 3 分别是一块磁盘的第一份、第二份和第三份快照。创建每一份快照时，文件系统分块检查磁盘数据，只有发生变化的数据块才会被拷贝到快照中：

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/9575/15433015905243_zh-CN.jpg)

-   快照 1 是第一份快照，备份了该磁盘上某一时刻的所有数据。

-   快照 2 只备份有变化的数据块 B1 和 C1。数据块 A 和 D 引用快照 1 中的 A 和 D。

-   快照 3 只备份有变化的数据块 B2。数据块 A 和 D 引用快照 1 中的 A 和 D，数据块 C1 引用快照 2 中的 C1。

-   当磁盘需要恢复到快照3的状态时，**回滚磁盘** 功能将数据块 A、B2、C1 和 D 备份到磁盘上，恢复磁盘到快照 3 的状态。

-   假如您需要删除快照 2，则快照中的数据块 B1 被删除，不会删除存在引用关系的数据块 C1。当磁盘恢复到快照 3 的状态时，仍可以恢复数据块 C1。


## 快照链 {#SnapshotChain .section}

快照链是一块磁盘中所有快照组成的关系链。一块磁盘对应一条快照链，快照链 ID 即磁盘 ID。一条快照链中有大量引用和被引用的数据块关系。快照链包括以下信息：

-   快照容量：快照链中所有快照占用的存储空间。

    **说明：** 快照服务按照快照容量计费，您可以使用快照链确认每块磁盘的快照容量。

-   快照额度：每块磁盘最多只能创建 64 份快照。更多详情，请参见 [使用限制](../../../../intl.zh-CN/用户指南/使用限制.md#)。

    **说明：** 磁盘快照数量达到额度上限后，如果要继续创建自动快照，系统会自动删除最早的自动快照；如果要手动创建快照，您需要手动删除不需要的快照。更多信息，请参见 用户指南 的 [为磁盘设置自动快照策略](../../../../intl.zh-CN/用户指南/快照/为磁盘设置自动快照策略.md#) 和 [删除快照](../../../../intl.zh-CN/用户指南/快照/删除快照和自动快照策略.md#)。

-   快照节点：快照链中的一个节点表示磁盘的一份快照。每条快照链最多有 64 个节点，包括手动创建及自动创建的快照。


