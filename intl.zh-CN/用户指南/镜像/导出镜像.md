# 导出镜像 {#concept_wfq_vdt_xdb .concept}

导出ECS自定义镜像适用于搭建本地测试环境，或者为私有云环境提供相同环境的场景。

**说明：** 

-   导出自定义镜像是相对耗时的任务，需要您耐心等待。完成的时间取决于自定义镜像文件的大小和当前导出任务的并发数。
-   导出自定义镜像需要使用[对象存储OSS](../../../../../intl.zh-CN/产品简介/什么是对象存储 OSS.md#)，所以会产生一定的OSS存储和下载的流量费用。更多详情，请参见OSS文档[计量项和计费项](../../../../../intl.zh-CN/计量计费/计量项和计费项.md#)。

## 限制条件 {#section_mcn_12t_xdb .section}

您需要注意如下限制条件：

-   不支持导出通过[云市场镜像](intl.zh-CN/用户指南/镜像/云市场镜像.md#)的系统盘快照创建的自定义镜像。
-   导出的自定义镜像中可以包含数据盘快照，但数据盘不能超过4块，单块数据盘容量最大不能超过500 GiB。
-   使用导出的全镜像[购买相同配置实例](intl.zh-CN/用户指南/实例/创建实例/购买相同配置实例.md#)时，您需要自行确认/etc/fstab记录的文件设备是否与导出的数据盘快照信息互相对应。

## 前提条件 {#section_b41_g2t_xdb .section}

在导出自定义镜像前，您应该已经完成如下工作：

-   [提交工单](https://workorder-intl.console.aliyun.com/#/ticket/createIndex)申请导出权限，并说明导出自定义镜像的使用场景。
-   请确保您已经开通OSS服务，而且自定义镜像所在地域里有可用的OSS Bucket。更多详情，请参见OSS文档[创建存储空间](../../../../../intl.zh-CN/快速入门/创建存储空间.md#)。

## 操作步骤 {#section_wwm_h2t_xdb .section}

在ECS管理控制台上导出一份自定义镜像的步骤如下：

1.  登录[ECS管理控制台](https://ecs.console.aliyun.com/#/home)。
2.  在左侧导航栏里，选择**快照和镜像** \> **镜像**。
3.  选择地域。
4.  找到需要导出的自定义镜像，在**操作**列中，单击**导出镜像**。
    1.  在导出镜像对话框里，单击提示信息里的**确认地址**。

        ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/9712/15504693774655_zh-CN.png)

    2.  在云资源访问授权窗口，单击**同意授权**授权ECS服务访问您的OSS资源。
5.  回到ECS管理控制台首页，在自定义镜像列表页**操作**列中，再次单击**导出镜像**。
6.  在导出镜像对话框中：
    -   选择一个与自定义镜像所属地域相同的OSS Bucket。
    -   为自定义镜像的Object名称设置一个前辍。例如，您可以将Demo设为前辍，则导出的自定义镜像文件，在OSS Bucket中的名称即为Demo-\[系统自动生成的文件名\]。
7.  单击**确定**开始导出自定义镜像。
8.  （可选）取消导出自定义镜像任务。在任务完成前，您都可以通过[**任务管理**](https://ecs.console.aliyun.com/#/task/region/cn-qingdao)，在相应地域下找到导出自定义镜像的任务，取消导出自定义镜像。

您也可以使用ECS API [ExportImage](../../../../../intl.zh-CN/API参考/镜像/ExportImage.md#)和[CancelTask](../../../../../intl.zh-CN/API参考/其他接口/CancelTask.md#)导出自定义镜像。

## 下一步 {#section_qlv_v2t_xdb .section}

导出的自定义镜像包含数据盘快照时，您的OSS中会出现多个文件。文件名带有system的表示系统盘快照，文件名带有data的表示数据盘快照。数据盘快照会有与数据盘对应的标识，即磁盘的挂载点，如xvdb或者xvdc。

1.  登录[OSS管理控制台](https://oss.console.aliyun.com/index#/)查询导出自定义镜像的结果。
2.  参见OSS文档[下载自定义镜像文件](../../../../../intl.zh-CN/控制台用户指南/管理文件/下载文件.md#)。

    **说明：** 目前镜像文件的导出格式默认为.raw.tar.gz，解压后为.raw格式。如果您的本地计算机为Mac OS X系统，推荐您使用gnu-tar解压工具。


