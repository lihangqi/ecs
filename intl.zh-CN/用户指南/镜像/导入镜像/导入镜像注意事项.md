# 导入镜像注意事项 {#concept_d53_2jm_xdb .concept}

您可以自行导入镜像创建云服务器ECS。为保证导入镜像的可用性，提高镜像导入效率，您需要在导入镜像时考虑限制条件。根据操作系统不同，如 [Linux 系统](#linux) 或者 [Windows 系统](#windows)，镜像文件的限制条件不同。

## Linux 系统 {#linux .section}

**限制条件**

导入的操作系统镜像有以下限制：

-   不支持多个网络接口。
-   不支持 IPv6 地址。
-   密码策略：8 - 30 个字符，必须同时包含三项（大写或小写字母、数字和特殊符号）。
-   需要安装虚拟化平台 XEN 和 KVM 驱动。
-   关闭防火墙，默认打开 22 端口。
-   镜像需要开启 DHCP。
-   建议 [安装 cloud-init](intl.zh-CN/用户指南/镜像/导入镜像/安装 cloud-init.md#)，以保证能成功配置 hostname、NTP 源和 yum 源。

**注意事项**

如果您要导入一个基于 Linux 操作系统的镜像，根据是否是标准平台镜像，您需要注意不同的问题。

|项目|标准平台镜像|非标准平台镜像|
|定义|官方发布的操作系统发行版本，目前支持的系统版本包括：-   Aliyun
-   CentOS 5,6,7
-   CoreOS 681.2.0+
-   Debian 6,7
-   FreeBSD
-   OpenSUSE 13.1
-   RedHat
-   SUSE Linux 10,11,12
-   Ubuntu 10,12,13,14

|非标准平台镜像是指：-   ECS已有的平台中没有的操作系统平台
-   或者，虽然是标准平台，但是系统关键性配置文件、系统基础环境 和应用方面没有遵守标准平台要求的平台。

如果您需要使用非标准平台镜像，在导入镜像时，您只能选择：-   Customized Linux：定制版镜像。如果导入的是这种平台，我们将按照预定好的配置方式对实例进行必要的网络、密码等配置。详细配置方法见 [配置 Customized Linux 自定义镜像](intl.zh-CN/用户指南/镜像/导入镜像/配置 Customized Linux 自定义镜像.md#)。
-   Others Linux：ECS统一标识为其他系统类型。如果导入的是这类平台，我们不会对所创建的实例进行任何处理。完成实例创建后，您需要通过管理控制台的 **远程连接** 功能连接到实例，再手工配置 IP、路由、密码等。

|
|系统关键性配置文件| -   请勿修改 `/etc/issue*`，否则将导致系统发行版无法被正常识别从而使得系统创建失败。
-   请勿修改 `/boot/grub/menu.lst`，否则将导致系统无法启动。
-   请勿修改 `/etc/fstab`，否则将导致异常分区无法被加载从而使得系统无法启动。
-   请勿修改 `/etc/shadow` 为 **只读**，否则将导致无法修改密码文件而使得系统创建失败。
-   请勿通过修改 `/etc/selinux/config` 开启 SELinux，否则将导致系统无法启动。

 |不符合标准平台镜像的要求|
|系统基础环境要求| -   不能调整系统盘分区，目前只支持单个根分区。
-   请检查系统盘的剩余空间，确保系统盘没有被写满。
-   不能修改关键系统文件，如 `/sbin`、`/bin`、`/lib*` 等目录。
-   在导入前，请确认文件系统的完整性。
-   支持的文件系统：xfs、ext3、ext4 文件系统，并采用 MBR 分区。

 |不符合标准平台镜像的要求|
|应用|请勿在导入的镜像中安装 qemu-ga，否则会导致ECS所需要的部分服务不可用。|不符合标准平台镜像的要求|
|镜像文件格式|目前，镜像导入只支持 RAW 和 VHD 格式，导入 qcow2 格式的镜像可以通过 [提交工单](https://workorder-intl.console.aliyun.com/#/ticket/createIndex) 申请。

如果您要导入其他格式的镜像，请先 [转换镜像格式](intl.zh-CN/用户指南/镜像/导入镜像/转换镜像格式.md#) 后再导入。建议您使用传输容量较小的 VHD 格式导入镜像。|
|镜像文件大小|建议您根据镜像的虚拟文件大小（非使用容量）来配置导入时的系统盘大小。系统盘容量范围为 40 GB−500 GB。|

## Windows 系统 {#windows .section}

Windows 系统需要注意以下事项。

**限制条件**

-   密码策略：8−30 个字符，必须同时包含三项（大写或小写字母、数字和特殊符号）。
-   关闭防火墙，默认打开 3389 端口。

**操作系统版本**

ECS支持您导入以下版本的操作系统镜像：

-   Microsoft Windows Server 2016
-   Microsoft Windows Server 2012 R2（标准版）
-   Microsoft Windows Server 2012（标准版、数据中心版）
-   Microsoft Windows Server 2008 R2（标准版、数据中心版、企业版）
-   Microsoft Windows Server 2008（标准版、数据中心版、企业版）
-   含 Service Pack 1 \(SP1\) 的 Microsoft Windows Server 2003（标准版、数据中心版、企业版）或更高版本

**说明：** 

不支持 Windows XP、Windows 7（专业版和企业版）、Windows 8、Windows 10。

**系统基础环境要求**

-   支持多分区系统盘。
-   请检查系统盘的剩余空间，确保系统盘没有被写满。
-   请勿修改关键系统文件。
-   在导入前，请确认文件系统的完整性。
-   支持的文件系统：使用 NTFS 文件系统格式化并采用 MBR 分区。

**应用**

请勿在导入的镜像中安装 qemu-ga，否则会导致ECS所需要的部分服务不可用。

**镜像文件大小和格式**

-   镜像导入只支持 RAW 和 VHD 格式，导入 qcow2 格式的镜像可以通过 [提交工单](https://workorder-intl.console.aliyun.com/#/ticket/createIndex) 申请。如果您要导入其他格式的镜像，请先 [转换镜像格式](intl.zh-CN/用户指南/镜像/导入镜像/转换镜像格式.md#) 后再导入。建议您使用传输容量较小的 VHD 格式导入镜像。
-   导入时的系统盘大小设置：建议您根据镜像的虚拟磁盘大小而非使用容量配置导入时的系统盘大小。系统盘容量范围为 40 GB−500 GB。

