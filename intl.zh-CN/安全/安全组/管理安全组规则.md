# 管理安全组规则 {#concept_xdb_x11_ydb .concept}

添加安全组规则后，您可以查询、修改、还原、导出、导入或删除安全组规则，以实现对安全组规则的精细化管理。

## 查询安全组规则 {#section_elt_zxy_lgb .section}

 **前提条件** 

您的安全组中已[添加安全组规则](intl.zh-CN/安全/安全组/添加安全组规则.md#)。

 **操作步骤** 

1.  登录[ECS管理控制台](https://ecs.console.aliyun.com)。
2.  在左侧导航栏，选择**网络与安全** \> **安全组**。
3.  在顶部状态栏处，选择地域。
4.  找到想要查询的安全组，单击**操作**列下的**配置规则**。
5.  单击安全组规则所属的方向，可以查询到各自分类的安全组规则。
    -   如果您需要查询专有网络类型的安全组规则，您可以选择**入方向**或**出方向**。
    -   如果您需要查询改经典网络类型的安全组规则您可以请选择**内网入方向**、**内网出方向**、**公网入方向**或**公网出方向**。

您也可以通过[DescribeSecurityGroupAttribute](../intl.zh-CN/API参考/安全组/DescribeSecurityGroupAttribute.md#)接口查询安全组详情。

## 修改安全组规则 {#section_icc_hyy_lgb .section}

 **背景信息** 

如果安全组规则对特定端口的访问不做限制，会造成严重的安全隐患。您可以通过修改安全组规则保证ECS实例的网络安全。

 **前提条件** 

您必须已经[创建了安全组](intl.zh-CN/安全/安全组/创建安全组.md#)，并在安全组中[添加了安全组规则](intl.zh-CN/安全/安全组/添加安全组规则.md#)。

 **操作步骤** 

1.  登录[ECS管理控制台](https://ecs.console.aliyun.com)。
2.  在左侧导航栏，选择**网络与安全** \> **安全组**。
3.  在顶部状态栏处，选择地域。
4.  在安全组列表页面中，找到需要修改安全组规则的安全组，单击**操作**列下的**配置规则**。
5.  单击安全组规则所属的方向。
    -   如果您需要修改专有网络类型的安全组规则，请选择**入方向**或**出方向**。
    -   如果您需要修改经典网络类型的安全组规则，请选择**内网入方向**、**内网出方向**、**公网入方向**或**公网出方向**。
6.  找到需要修改的安全组规则，单击**操作**列下的**修改**。如何配置安全组规则请参见[添加安全组规则](intl.zh-CN/安全/安全组/添加安全组规则.md#ul_vpc_qwz_xdb)。安全组规则的应用案例，请参见[安全组规则的典型应用](intl.zh-CN/隐藏/Alibaba Cloud ECS/安全/安全组规则的典型应用.md#)。

## 还原安全组规则 {#section_l2z_jyy_lgb .section}

 **背景信息** 

还原安全组规则是指将一个原安全组里的规则全部或部分地还原为目标安全组规则的过程。

-   **全部还原** ：还原时，系统在原安全组中删除目标安全组中没有的规则，并在原安全组中添加只有目标安全组中才有的规则。还原操作后，原安全组里的规则与目标安全组里的规则完全相同。
-   **部分还原** ：仅将目标安全组中才有的规则添加到原安全组里，忽略原安全组中有而目标安全组中没有的规则。

 **使用限制** 

-   原安全组与目标安全组必须在同一个地域。
-   原安全组与目标安全组必须为同一种网络类型。
-   目标安全组中如果有系统级的安全组规则（优先级为 110），还原时无法创建该类规则，还原后，原安全组中的规则可能会与预期不同。如果您需要这些安全组规则，请手动创建相似规则（优先级可以设为 100）。

 **前提条件** 

在同一地域下，同一种网络类型下，您应该拥有至少一个安全组。

 **操作步骤** 

1.  登录[ECS管理控制台](https://ecs.console.aliyun.com)。
2.  在左侧导航栏，选择**网络与安全** \> **安全组**。
3.  在顶部状态栏处，选择地域。
4.  在安全组列表里，找到需要还原规则的安全组作为原安全组，单击**操作**列下的**还原规则**。
5.  在还原规则对话框里：

    1.  选择**目标安全组**，目标安全组必须与原安全组拥有不一样的规则。
    2.  选择**还原策略**。
        -   如果您需要原安全组与目标安全组拥有完全一致的规则，您应该选择**全部还原**。
        -   如果您只需要在原安全组中添加只有目标安全组中才有的规则，您应该选择**部分还原**。
    3.  预览还原结果。
        -   绿色显示的是只有目标安全组中才有的规则。无论是**全部还原**还是**部分还原**，这部分规则都会被添加到原安全组中。
        -   红色显示的是目标安全组中没有的规则。如果选择**全部还原**，系统会在原安全组中删除这部分规则。如果选择**部分还原**，原安全组中这部分规则仍会保留。
    4.  确认无误后，单击**确定**。
    创建成功后，还原规则对话框会自动关闭。在**安全组列表**中，找到刚完成还原操作的原安全组，在**操作**列中，单击**配置规则**进入安全组规则页面，查看更新后的安全组规则。


## 导出安全组规则 {#section_o1b_syy_lgb .section}

1.  登录[ECS管理控制台](https://ecs.console.aliyun.com)。
2.  在左侧导航栏，选择**网络与安全** \> **安全组**。
3.  在顶部状态栏处，选择地域。
4.  在安全组列表页面中，找到需要导出安全组规则的安全组，单击**操作**列下的**配置规则**。
5.  单击**导出全部规则**，下载并保存 JSON 文件到本地。

    **说明：** JSON 文件命名规则示例：

    ecs\_$\{region\_id\}\_$\{groupID\}.json

    假设 regionID 是 cn-qingdao， groupID 是 sg-123，导出的 JSON 文件名称是 ecs\_cn-qingdao\_sg-123.json。


## 导入安全组规则 {#section_udj_zyy_lgb .section}

1.  登录[ECS管理控制台](https://ecs.console.aliyun.com)。
2.  在左侧导航栏，选择**网络与安全** \> **安全组**。
3.  在顶部状态栏处，选择地域。

    **说明：** 安全组支持导入不同地域的安全组规则。

4.  在安全组列表页面中，找到需要导入安全组规则的安全组，单击**操作**列下的**配置规则**。
5.  单击导入规则。
6.  选择要导入的JSON文件，将会生成预览规则。

    预览规则显示以下信息：

    -   导入的规则数。
    -   检查结果。如果存在导入失败的规则，您可以将光标移到警告图标上查看失败原因。
    -   导入规则详情。
    **说明：** 导入的安全组规则不能超过100条，超出限制的规则会导入失败。导入的新规则不会覆盖原有规则。

7.  单击**开始导入**。
8.  查看导入安全组规则的结果，单击**导入结束，关闭**。

## 删除安全组规则 {#section_rmr_tzy_lgb .section}

1.  登录[ECS管理控制台](https://ecs.console.aliyun.com)。
2.  在左侧导航栏，选择**网络与安全** \> **安全组**。
3.  在顶部状态栏处，选择地域。
4.  找到需要删除规则的安全组，单击**操作**列下的**配置规则**。
5.  单击安全组规则所属的方向：
    -   如果您需要删除专有网络类型的安全组规则，请选择**入方向**或**出方向**。
    -   如果您需要删除经典网络类型的安全组规则，请选择**内网入方向**、**内网出方向**、**公网入方向**或**公网出方向**。
6.  找到需要删除的安全组规则，单击**操作**列下的**删除**。
7.  在弹出的删除安全组规则对话框中，阅读提示信息，确认无误后，单击**确定**。

您也可以通过[RevokeSecurityGroup](../intl.zh-CN/API参考/安全组/RevokeSecurityGroup.md#)接口删除一条安全组入方向规则或通过[RevokeSecurityGroupEgress](../intl.zh-CN/API参考/安全组/RevokeSecurityGroupEgress.md#)接口删除一条安全组出方向规则。

