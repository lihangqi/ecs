# Windows 实例磁盘空间满的问题处理及最佳实践 {#concept_51683_zh .concept}

本文主要介绍 Windows 实例磁盘空间不足时对应的解决方法以及磁盘日常维护的最佳实践。

本文中的方法适用于 Windows Server 2003 以上系统，这里以 Windows Server 2008 R2 为例。

**说明：** Linux 实例磁盘空间不足时对应的处理方法参考 [ECS Linux 磁盘空间满排查处理](https://help.aliyun.com/knowledge_detail/42531.html)。

## 解决方法 {#section_k11_xvx_gfb .section}

解决 Windows 磁盘空间满的问题，有以下两种处理方式：

-    [释放磁盘空间](#ul_gt2_bwx_gfb) 
-    [扩容磁盘](#image_r5t_xxx_gfb) 

-   **释放磁盘空间**

    您可以通过清理磁盘中不需要的文件来解决磁盘空间满的问题，首先[找出占用磁盘空间过多的文件](#ul_ysq_fwx_gfb)，然后[删除不需要的文件](#ol_ojf_pxx_gfb)，具体步骤如下：

    -   **找出占用磁盘空间过多的文件**

        1.   [远程连接](../../../../../cn.zh-CN/用户指南/连接实例/使用软件连接Windows实例.md#)并登录到 Windows 实例。
        2.  双击**计算机**，单击要清理的磁盘，按下键盘的 Ctrl+F 键，定位到搜索框。
        3.  在搜索框中，选择**大小**，然后根据系统定义大小筛选指定磁盘的大文件。

            ![](images/12916_zh-CN_source.png)

            **说明：** 您也可以自定义文件大小范围进行检索，如输入大小：\>500M，会检索该磁盘大于 500 M 的文件。如输入大小：\> 100M < 500M，会检索大于 100 M 但小于 500 M 的文件。

    -   **删除不需要的文件**

        找出占用了磁盘空间过多的文件后，如果文件不再需要，可以及时清理。

        推荐您使用系统自带的磁盘清理工具，删除日志文件及系统上其他不需要文件，并清空回收站。磁盘清理工具服务器默认没有安装，需要手动安装，具体安装以及删除文件的步骤如下：

        1.  打开服务器管理器，单击**功能**，然后单击**添加功能**。
        2.  在添加功能向导窗口，勾选**墨迹手写服务**和**桌面体验**，然后单击**下一步**。
        3.  在弹出的窗口中，单击**安装**。
        4.  安装页面上，系统将提示您手动重新启动服务器，单击**是**重新启动服务器。重新启动服务器之后，确认已安装了桌面体验。
        5.  安装完成后，选择**开始** \> **所有程序** \> **附件** \> **系统工具** \> **磁盘清理**，选择要清理的选项，单击**确定**。

            ![](images/12917_zh-CN_source.png)

-   **扩容磁盘**

    您可以通过扩容磁盘的方式解决磁盘空间满的问题，具体步骤参考[扩容 Windows 系统盘](../../../../../cn.zh-CN/用户指南/云盘/扩容云盘/扩容系统盘.md#)，[扩容 Windows 数据盘](../../../../../cn.zh-CN/用户指南/云盘/扩容云盘/扩容数据盘_Windows.md#)。


## 最佳实践 {#section_jmf_h5x_gfb .section}

日常需要养成良好的磁盘使用习惯，这里推荐以下几个磁盘使用的最佳实践：

-    [文件压缩保存](#ul_ayw_mzz_gfb) 
-    [定期清理不必要的应用程序](#image_b2j_spf_hfb) 
-    [设置磁盘监控](#image_o2w_cqf_hfb) 

-   **文件压缩保存**

    磁盘中一些定期生成的文件可以进行归档压缩后保存，以提高磁盘使用率。压缩工具推荐使用 WinRAR，配置压缩策略过程如下：

    1.  安装好软件后找到需要压缩的文件，右键该文件，选择**添加到压缩文件**。
    2.  在设置界面单击窗口上方备份选项卡，然后勾选**按掩码产生文件名**，注意此时不要单击**确定**。
    3.  单击窗口上方常规选项卡，单击**浏览**来定义压缩文件的路径。单击**配置**，选择**保存当前配置为新配置**。
    4.  在弹出的配置参数窗口中，输入**配置名**，勾选**保存压缩文件名**、**保存选定文件名**、**桌面创建快捷方式**，单击**确定**。

        ![](images/12918_zh-CN_source.png)

    5.  然后在压缩文件名和参数窗口，单击**确定**。桌面会生成一个此压缩包的快捷键。

        ![](images/12919_zh-CN_source.png)

    6.  选择**开始** \> **控制面板**，单击**系统和安全**，单击**计划任务**，然后在任务计划程序窗口中，选择**创建基本任务**。

        ![](images/12920_zh-CN_source.png)

    7.  在弹出的窗口中为新任务命名，单击**下一步**。
    8.  选择触发周期，单击**下一步**。然后选择**启动程序**，单击**下一步**。
    9.  此时会弹出窗口需要您输入**程序或脚本**。先找到刚才生成的压缩包快捷键，右键该快捷键，选择**属性**，复制**目标**内容。

        ![](images/12921_zh-CN_source.png)

    10. 然后将复制内容粘贴到启动程序操作中的**程序或脚本**文本框中，单击**确定**完成创建。

        ![](images/12922_zh-CN_source.png)

    设置好备份策略以后，可以定期的去清理过期的备份文件，避免占用过大的空间。

-   **定期清理不必要的应用程序**

    定期清理不必要的应用程序，您可以通过控制面板中的程序和功能窗口清理不再使用的程序软件。

    ![](images/12923_zh-CN_source.png)

-   **设置磁盘监控**

    阿里云的 ECS 服务器默认安装了监控插件，您可以在[云监控控制台](https://cms.console.aliyun.com/#/groups/)中创建磁盘[报警规则](../../../../../cn.zh-CN/用户指南/报警服务/管理报警规则.md#)。这样可以实时了解磁盘空间使用率是否到达一个高位值，以便及时清理。

    ![](images/12924_zh-CN_source.png)


