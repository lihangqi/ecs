# 阿里云ECS实例间迁移 {#concept_pp2_xjw_fgb .concept}

本文介绍阿里云ECS实例间的迁移场景和操作步骤。

阿里云ECS实例间迁移，建议您首先考虑使用阿里云的镜像复制和镜像共享功能。具体操作步骤，请参见[镜像复制](../../../../../cn.zh-CN/用户指南/镜像/复制镜像.md#)和[镜像共享](../../../../../cn.zh-CN/用户指南/镜像/共享镜像.md#) 。这两个功能不适用时，您可以参考下列场景。

## 相同VPC下的ECS实例迁移 {#section_azd_vsw_fgb .section}

此场景适用于ECS磁盘缩容。更多详情，请参见[ECS磁盘缩容](cn.zh-CN/最佳实践/磁盘缩容.md#)。

在此场景中，建议您使用VPC内网迁移实例以达到最大的传输效率。关于VPC内网迁移的更多详情，请参见[VPC内网迁移](cn.zh-CN/最佳实践/迁移服务/迁移方案/VPC内网迁移.md#)。

## 不同VPC下的ECS Windows实例迁移 {#section_zdh_5tw_fgb .section}

此场景适用于不同账号、不同地域或不同VPC下的ECS Windows实例迁移。

**准备工作**

1.  请您创建快照以备份数据。
2.  检查授权应用。

    不同VPC下ECS实例迁移到阿里云后，系统底层硬件设备会发生变化，可能会导致某些与硬件绑定的应用许可证（license）失效，您需要做好检查。

3.  检查网络环境。
    -   如果您的网络是跨国际地域，由于网络环境不稳定，迁云速度可能较慢。
    -   如果您的网络可以打通VPC内网，建议您参考[VPC内网迁移](cn.zh-CN/最佳实践/迁移服务/迁移方案/VPC内网迁移.md#)。
4.  检查并确保Windows系统VSS服务为启动状态 。
5.  检查是否安装了qemu-agent工具。如果安装了此工具，您需要先卸载。卸载的具体步骤，请参见[迁云工具FAQ](cn.zh-CN/用户指南/P2V 迁云工具/迁云工具 FAQ.md#)。
6.  建议您先使用测试机，按照本文中介绍的迁云的操作步骤进行测试演练。

**操作步骤**

1.  下载并安装迁云工具到待迁移的服务器。具体步骤请参见[下载并安装迁云工具](../../../../../cn.zh-CN/用户指南/P2V 迁云工具/使用迁云工具迁移服务器至阿里云.md#section_twq_sxz_jfb)。
2.  配置user\_config.json。

    user\_config.json配置文件的主要配置项包括：

    -   阿里云账号AccessKey信息
    -   迁移目标区域、目标镜像名称
    -   （可选）目标系统盘大小、目标数据盘配置
    -   迁移源系统平台、架构
    各配置项的详细配置方法，请参见[配置迁移源和迁移目标](../../../../../cn.zh-CN/用户指南/P2V 迁云工具/使用迁云工具迁移服务器至阿里云.md#section_p5x_xzz_jfb)。

3.  （可选）配置无需迁移的目录或文件。具体配置方法，请参见[（可选）排除不迁移的文件或目录](../../../../../cn.zh-CN/用户指南/P2V 迁云工具/使用迁云工具迁移服务器至阿里云.md#section_tzq_sxz_jfb)。
4.  运行迁云工具主程序。

    以管理员身份运行go2aliyun\_client.exe或go2aliyun\_gui.exe。如果是GUI版本，则需要单击start按钮开始迁移。


## 不同VPC下的ECS Linux实例迁移 {#section_mbw_s1k_pgb .section}

此场景适用于不同账号、不同地域或不同VPC下的ECS Linux实例迁移。

**准备工作**

1.  请您创建快照以备份数据。
2.  检查授权应用。

    ECS实例迁移至阿里云后，系统底层硬件设备会发生变化，可能会导致一些跟硬件绑定的应用许可证（license）失效，您需要做好检查。

3.  检查网络环境。
    -   如果您的网络是跨国际地域，由于网络环境较不稳定，迁云速度可能较慢。
    -   如果您的网络可以打通VPC内网，建议您参考[VPC内网迁移](cn.zh-CN/最佳实践/迁移服务/迁移方案/VPC内网迁移.md#)。
4.  下载和安装迁云工具，具体操作步骤，请参见[下载和安装迁云工具](../../../../../cn.zh-CN/用户指南/P2V 迁云工具/使用迁云工具迁移服务器至阿里云.md#section_twq_sxz_jfb)。
5.  进入迁移工具所在目录，运行`./Check/client_check --check`命令检查待迁移ECS实例是否满足迁移条件。如果所有的检测项都为`OK`，您可以开始迁移。否则，您需要检查GRUB引导程序。部分低内核系统如CentOS 5/Red Hat 5、Debian 7需要将GRUB升级至1.99及以上版本，具体操作步骤，请参见[升级GRUB至1.99及以上](https://help.aliyun.com/knowledge_detail/62807.html)。

    **说明：** 请使用root权限升级GRUB引导程序。

6.  建议您先使用测试机，按照本文中介绍的迁云操作步骤进行测试演练。

**操作步骤**

1.  配置user\_config.json。

    user\_config.json配置文件的主要配置项包括：

    -   阿里云账号AccessKey信息
    -   迁移目标区域、目标镜像名称
    -   （可选）目标系统盘大小、目标数据盘配置
    -   迁移源系统平台、架构
    各配置项的详细配置方法，请参见[配置迁移源和迁移目标](../../../../../cn.zh-CN/用户指南/P2V 迁云工具/使用迁云工具迁移服务器至阿里云.md#section_p5x_xzz_jfb)。

2.  （可选）配置无需迁移的目录或文件。具体配置方法，请参见[（可选）排除不迁移的文件或目录](../../../../../cn.zh-CN/用户指南/P2V 迁云工具/使用迁云工具迁移服务器至阿里云.md#section_tzq_sxz_jfb)。
3.  使用root权限运行以下命令，为迁云工具主程序添加可执行权限并执行该程序。

    ```
    chmod +x go2aliyun_client
    ./go2aliyun_client
    ```

4.  等待迁云工具运行完成。当运行迁云工具的界面上提示Go to Aliyun Finished!时，表示迁移完成。如下图所示。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/65301/154872851938196_zh-CN.png)


