# Azure迁移至阿里云ECS {#concept_o3c_xgv_fgb .concept}

您可以参考本文档中的步骤，将Azure实例迁移至阿里云ECS实例。

## Azure Windows系统迁移至阿里云 {#section_lvr_zf4_4gb .section}

**准备工作**

1.  请您创建快照以备份数据。
2.  检查授权应用。

    Azure实例迁移到阿里云后，系统底层硬件设备会发生变化，可能会导致某些与硬件绑定的应用许可证（license）失效，您需要做好检查。

3.  检查网络环境。
    -   如果您的网络是跨国际地域，由于网络环境较不稳定，建议您参考[跨国际地域迁云的操作步骤](#section_GlobalP2V)。
    -   如果您的网络可以打通VPC内网，建议您参考[VPC内网迁移](cn.zh-CN/最佳实践/迁移服务/迁移方案/VPC内网迁移.md#)。
4.  检查并确保Windows系统VSS服务为启动状态 。
5.  检查是否安装了qemu-agent工具。如果安装了此工具，您需要先卸载。卸载的具体步骤，请参见[迁云工具FAQ](cn.zh-CN/用户指南/P2V 迁云工具/迁云工具 FAQ.md#)。
6.  建议您先使用测试机，按照本文中介绍的迁云操作步骤进行测试演练。

**操作步骤**

1.  下载并安装迁云工具到待迁移的服务器。具体步骤请参见[下载并安装迁云工具](../../../../../cn.zh-CN/用户指南/P2V 迁云工具/使用迁云工具迁移服务器至阿里云.md#section_twq_sxz_jfb)。
2.  配置user\_config.json。

    user\_config.json配置文件的主要配置项包括：

    -   阿里云账号AccessKey信息
    -   迁移目标区域、目标镜像名称
    -   （可选）目标系统盘大小、目标数据盘配置
    -   迁移源系统平台、架构
    各配置项的详细配置方法，请参见[配置迁移源和迁移目标](../../../../../cn.zh-CN/用户指南/P2V 迁云工具/使用迁云工具迁移服务器至阿里云.md#section_p5x_xzz_jfb)。

3.  （可选）配置无需迁移的目录或文件。具体配置方法，请参见[（可选）排除不迁移的文件或目录](../../../../../cn.zh-CN/用户指南/P2V 迁云工具/使用迁云工具迁移服务器至阿里云.md#section_tzq_sxz_jfb)。
4.  运行迁云工具主程序。

    以管理员身份运行go2aliyun\_client.exe或go2aliyun\_gui.exe。如果是GUI版本，则需要单击start按钮开始迁移。


## Azure Linux系统迁移至阿里云 {#section_qn4_zbv_fgb .section}

**准备工作**

1.  请您创建快照以备份数据。
2.  检查授权应用。

    Azure实例迁移至阿里云后，系统底层硬件设备会发生变化，可能会导致一些跟硬件绑定的应用许可证（license）失效，您需要做好检查。

3.  检查网络环境。
    -   如果您的网络是跨国际地域，由于网络环境较不稳定，建议您参考[跨国际地域迁云的操作步骤](#section_GlobalP2V)。
    -   如果您的网络可以打通VPC内网，建议您参考[VPC内网迁移](cn.zh-CN/最佳实践/迁移服务/迁移方案/VPC内网迁移.md#)。
4.  下载和安装迁云工具。具体操作步骤，请参见[下载和安装迁云工具](../../../../../cn.zh-CN/用户指南/P2V 迁云工具/使用迁云工具迁移服务器至阿里云.md#section_twq_sxz_jfb)。
5.  进入迁移工具所在目录，运行`./Check/client_check --check`命令检查待迁移Azure实例是否满足迁移条件。如果所有的检测项都为`OK`，您可以开始迁移。否则，您需要进行下列检查：
    -   检查cloud-init。具体操作步骤，请参见[安装cloud-init](../../../../../cn.zh-CN/用户指南/镜像/导入镜像/安装cloud-init.md#)。
    -   检查GRUB引导程序。部分低内核系统如CentOS 5/Red Hat 5、Debian 7需要将GRUB升级至1.99及以上版本，具体操作步骤，请参见[升级GRUB至1.99及以上](https://help.aliyun.com/knowledge_detail/62807.html)。

        **说明：** 请使用root权限升级GRUB引导程序。

6.  建议您先使用测试机，按照本文中介绍的迁云操作步骤进行测试演练。

**操作步骤**

1.  配置user\_config.json。

    user\_config.json配置文件的主要配置项包括：

    -   阿里云账号AccessKey信息
    -   迁移目标区域、目标镜像名称
    -   （可选）目标系统盘大小、目标数据盘配置
    -   迁移源系统平台、架构
    各配置项的详细配置方法，请参见[配置迁移源和迁移目标](../../../../../cn.zh-CN/用户指南/P2V 迁云工具/使用迁云工具迁移服务器至阿里云.md#section_p5x_xzz_jfb)。

2.  （可选）配置无需迁移的目录或文件。具体配置方法，请参见[（可选）排除不迁移的文件或目录](../../../../../cn.zh-CN/用户指南/P2V 迁云工具/使用迁云工具迁移服务器至阿里云.md#section_tzq_sxz_jfb)。
3.  使用root权限运行以下命令，为迁云工具主程序添加可执行权限并执行该程序。

    ```
    chmod +x go2aliyun_client
    ./go2aliyun_client
    ```

4.  等待迁云工具运行完成。当运行迁云工具的界面上提示Go to Aliyun Finished!时，表示迁移完成。如下图所示。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/65301/154872835538196_zh-CN.png)


## 跨国际地域迁云的操作步骤 {#section_GlobalP2V .section}

1.  将Azure实例迁移到阿里云对应的国际地域，具体操作步骤，请参见[全量迁移](cn.zh-CN/最佳实践/迁移服务/迁移方案/全量迁移.md#)。例如，Azure实例位于美国，您可以将其迁移至阿里云位于美国的地域。具体地域及地域ID请参见[地域和可用区](../../../../../cn.zh-CN/通用参考/地域和可用区.md#section_ug5_k5k_xdb)。
2.  将新建的镜像复制到目标阿里云地域。具体操作步骤，请参见[复制镜像](../../../../../cn.zh-CN/用户指南/镜像/复制镜像.md#)。
3.  使用该镜像在目标阿里云地域创建实例。具体操作步骤，请参见[使用自定义镜像创建实例](../../../../../cn.zh-CN/用户指南/实例/创建实例/使用自定义镜像创建实例.md#)。

