# 评估设计 {#concept_dcb_23k_yfb .concept}

在开始迁移之前，您需要先评估业务内容、迁移时间和成本等因素，制定迁移计划。本文介绍需要评估的几大因素。

## 操作系统 {#section_myc_v3k_yfb .section}

-   内核版本：要求CentOS/RedHat 5及以上、Ubuntu 10及以上、Windows Server 2003及以上等。对于低版本系统内核，需要先升级内核。
-   虚拟化驱动：必须安装KVM virtio驱动。
-   需要服务软件：Linux系统必需安装rsync，建议安装curl；Windows系统需确保VSS（Volume Shadow Services）服务正常。
-   GRUB引导程序：部分低内核系统如CentOS/Red Hat 5、Debian 7需要升级GRUB至1.99及以上。
-   磁盘大小：系统盘40-500GiB；数据盘20-32768GiB。

## 应用业务 {#section_lq1_w3k_yfb .section}

-   业务暂停问题：如果有数据库等大型服务应用，如Oracle、SQLServer、MongoDB、MySQL和Docker，可以考虑暂停服务应用迁移。如果不能暂停业务，迁移时可以先将服务应用数据目录排除，待服务器迁移完成后，再同步数据库的数据。
-   大数据量问题：如果有大量或海量数据文件，可以先使用迁移服务只迁移服务器应用环境，同时评估是否需要使用专线或闪电立方等专用大数据量传输方案来迁移以获得更好的传输速度。
-   软件授权问题：评估源系统需要授权的软件在迁移后是否需要重新授权。
-   网络配置问题：迁移后公网IP会发生变化，需评估是否会影响原业务。

## 网络模式 {#section_abb_x3k_yfb .section}

您需要评估待迁移的服务器系统所需网络传输模式。

迁移服务器分为3个阶段：

1.  迁移资源准备
2.  数据传输
3.  迁移收尾

其中，1、2、3阶段都默认使用公网，默认情况下需要您的待迁移服务器能够访问以下阿里云服务地址和端口：

-   阶段1、3
    -   ECS服务：https://ecs.aliyuncs.com 443 端口。[更多接入地址](../../../../cn.zh-CN/API参考/快速入门/请求结构.md#)视区域而定
    -   VPC服务：https://vpc.aliyuncs.com 443端口
    -   STS服务：https://sts.aliyuncs.com 443端口
-   阶段2：临时中转实例的（默认公网）IP地址，8080 和 8703端口

此外，迁移服务针对您的实际网络环境需求提供了多种网络传输模式：

-   默认公网传输：阶段1、2、3都默认使用公网。
-   手动内网传输：阶段1、3使用公网，阶段2使用VPC内网IP；适合不能访问上述阿里云服务地址、已打通指定VPC内网的服务器系统，但是需要额外需要准备一台可以访问上述阿里云服务地址的同类型系统来配合操作，详情请参见[VPC内网迁移](cn.zh-CN/最佳实践/迁移服务/迁移方案/VPC内网迁移.md#)。
-   自动内网传输：阶段1、3使用公网，阶段2使用VPC内网。适合能访问上述阿里云服务地址，已经打通指定VPC内网，并且希望数据传输（阶段2）走VPC内网的服务器系统。此模式相较于**手动内网传输**模式的操作更简单，详情请参见[VPC内网迁移](cn.zh-CN/最佳实践/迁移服务/迁移方案/VPC内网迁移.md#)。

## 迁移数量 {#section_klg_y3k_yfb .section}

如果您需要做批量服务器迁移，还需要注意以下问题：

1.  迁移前：

    -   本地网络运营商流量限制，建议与网络运营商协调确认，或者在迁云工具中配置传输带宽上限。
    -   阿里云镜像数量及按量资源（如vCPU）的额度限制，您可以提交工单申请放开限制。
2.  迁移中：

    -   服务器系统是否支持自动化批量运维，来批量下发和运行迁云工具。
    -   是否需要进行批量迁移进度日志统计分析。
3.  迁移后：

    -   迁移后系统如何批量创建和配置。
    -   迁移后系统批量验证。

## 迁移周期 {#section_hcw_y3k_yfb .section}

迁移周期与迁移服务器数量和实际数据量成正比，建议您根据实际迁移测试演练进行评估。

迁移周期主要分为迁移前、迁移中、迁移后3部分：

-   迁移前时间 = 迁移条件准备时间

    迁移条件准备时间视实际情况而定

-   迁移中时间 = 数据传输时间 + 镜像制作时间（可选）

    数据传输时间 = 实际数据量 / 实际网速

    镜像制作时间 = 实际数据量 / 快照服务速度

    **说明：** 迁云工具传输数据时默认是打开了压缩传输选项的，对于传输速度会有30%-40%的提升；镜像制作时间是依赖阿里云快照服务，目前速度在10-30MB/s左右。

-   迁移后时间 = 迁移后系统增量同步时间（可选） + 系统配置验证时间

    系统增量同步时间 = 实际增量数据量 / 实际网速

    系统配置验证时间视实际情况而定


**说明：** 迁移服务默认迁移结果是生成全量镜像，如果需要尽量缩短迁移周期，也可以选择直接迁移到目标实例，来达到缩短迁移周期的目的，更多支持可以联系迁移服务技术人员。

## 迁移成本 {#section_zws_z3k_yfb .section}

-   迁云工具是免费工具，不收取额外的费用。但是，在迁移过程中会涉及少量资源计费：
    -   迁移过程中，会创建快照以生成自定义镜像，该快照会按照实际占用容量收取少部分费用。详情请参见[快照计费方式](../../../../cn.zh-CN/产品定价/快照计费方式.md#)。

    -   迁移时，系统默认在您的阿里云账号下创建一个默认名为 INSTANCE\_FOR\_GOTOALIYUN 的ECS实例做中转站。该中转实例付费类型为按量付费，您需要确保账号余额大于等于 100 元。按量付费实例产生的资源耗费及计费说明请参见[按量付费](../../../../cn.zh-CN/产品定价/按量付费.md#)。


**说明：** 迁移完成后，中转实例（包含云盘）资源会自动释放。如果迁移失败，中转实例会保留在ECS控制台，以便于重新迁移。如果您不再继续迁移，需要自行手动释放实例，以免产生不必要的费用。

