# 重新初始化数据盘 {#task_1340072 .task}

当云盘挂载在ECS实例上时，您可以使用重新初始化磁盘功能将数据盘恢复到创建时的状态。

-   数据盘已经挂载到实例上。详细操作请参见[挂载云盘](cn.zh-CN/块存储/云盘/挂载云盘.md#)。
-   （仅适用于Linux实例）如果数据盘创建时是一个空盘，而且您在/etc/fstab中添加了开机自动挂载数据盘分区的命令，重新初始化后，开机自动挂载会失效，启动时一般会出现异常。建议您在/etc/fstab里注释掉开机挂载数据盘分区的命令。操作步骤如下：
    1.  [远程连接Linux实例](cn.zh-CN/实例/连接实例/连接方式导航.md#)。
    2.  运行`vim /etc/fstab`。
    3.  按`i`键进入编辑模式。
    4.  找到数据盘分区挂载信息，加\#注释掉挂载信息，如下所示。

        ``` {#codeblock_2nw_kz3_tu1 .screen}
        # /dev/vdb1 /InitTest ext3 defaults 0 0
        ```

        **说明：** 本文的步骤描述中用/dev/vdb1表示数据盘分区，/InitTest表示挂载点。您可以根据实际情况替换。

    5.  按`Esc`键退出编辑模式，输入:wq保存并退出。

重新初始化后，数据盘的状态根据云盘最初的状态以及实例的操作系统不同而异：

-   作数据盘用的云盘会恢复到初始状态：
    -   如果原来是空盘，则恢复为空盘。
    -   如果是通过快照创建的云盘，则会恢复到快照的状态。
-   Windows实例：无论数据盘是从快照创建而来，还是一个全新的空盘，重新初始化后，数据盘会恢复到创建后的初始状态，但是可以直接使用，不需要执行其他操作。
-   Linux实例：
    -   如果数据盘是从快照创建而来：数据盘会恢复到原来快照的状态，不需要重新挂载数据盘分区，但是数据盘创建成功后产生的所有数据都会丢失。
    -   如果数据盘创建时是一个空盘：数据盘的文件系统及内容完全丢失，您必须重新格式化、分区数据盘，并挂载数据盘分区。

1.  登录[ECS管理控制台](https://ecs.console.aliyun.com)。
2.  在左侧导航栏，选择**实例与镜像** \> **实例**。
3.  在顶部状态栏处，选择地域。
4.  找到需要初始化数据盘的实例，单击实例ID进入实例详情页面。
5.  在页面右上角，单击**停止**，停止实例。 

    **说明：** 如果是按量付费的VPC类型实例，而且已经开启了按量付费实例停机不收费功能，在提醒弹出框中，单击**确定**。在停止实例对话框中，选择**停止后仍旧保留实例并继续收费**。如果使用**停机不收费**模式，重新初始化系统盘后可能无法成功启动实例。详情请参见[按量付费实例停机不收费](../cn.zh-CN/产品定价/按量付费实例停机不收费.md#)。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/9676/15644695775328_zh-CN.png)

6.  实例进入**已停止**状态后，在左侧导航栏中，单击**本实例磁盘**。
7.  找到数据盘，在**操作**列中，单击**重新初始化磁盘**。
8.  在弹出的重新初始化磁盘对话框里，认真阅读提示后，单击**确认重新初始化磁盘**。
9.  （仅适用于主账号）获取并输入手机短信验证码后，单击**确认**。
10. 在左侧导航栏中，单击**实例详情**。
11. 在页面右上角，单击**启动**，启动实例，完成数据盘初始化。

-   （仅适用于Linux实例）如果数据盘创建时是一个空盘，您必须格式化数据盘。详情请参见[Linux格式化数据盘](../cn.zh-CN/个人版快速入门/格式化数据盘/Linux格式化数据盘.md#)。
-   数据盘重新初始化后，您需要重新部署业务（包括应用和配置）从而尽快恢复业务。

**相关文档**  


[ReInitDisk](../cn.zh-CN/API参考/磁盘/ReInitDisk.md#)

[重新初始化系统盘](cn.zh-CN/块存储/云盘/重新初始化云盘/重新初始化系统盘.md#)

